const __vite__fileDeps=["assets/ConfirmDeleteDialog-D4_Bbpdd.js","assets/index-Du6Uwkmi.js","assets/DialogTitle-Ds0-Ex3u.js","assets/Modal-DdgoaOgr.js","assets/Menu-wUt2zOYa.js","assets/Typography-D1miUXsC.js","assets/Button-DK210MLF.js","assets/AddMemberDialog-Bn5DCHVV.js","assets/UserItem-BKAyl7NY.js","assets/ListItem-2FVKjEUW.js","assets/isMuiElement-D1-MrS4c.js","assets/Hook-v4cjVH3m.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{j as e,r as t,L,af as J,k as X,u as Z,ag as ee,n as re,c as se,ah as oe,a8 as h,S as l,Y as te,ai as ae,aj as ne,a0 as ie,ak as le,al as ce}from"./index-Du6Uwkmi.js";import{A as de}from"./AvatarCard-DzGKErVP.js";import{U as me}from"./UserItem-BKAyl7NY.js";import{b as g,a as pe,m as ue,D as xe,A as he}from"./Hook-v4cjVH3m.js";import{c as j,T as m}from"./Typography-D1miUXsC.js";import{C as ge}from"./CircularProgress-CXO9Uo61.js";import{B as G,I as d}from"./Modal-DdgoaOgr.js";import{D as je,B as fe,M as be}from"./Menu-D39zixRf.js";import{T as ve}from"./Tooltip-Cct72D16.js";import{T as Me}from"./TextField-BYQxlb9E.js";import{B as E}from"./Button-DK210MLF.js";import"./Menu-wUt2zOYa.js";import"./ListItem-2FVKjEUW.js";import"./isMuiElement-D1-MrS4c.js";const De=j(e.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done"),Ie=j(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),ke=j(e.jsx("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace"),ye=t.lazy(()=>L(()=>import("./ConfirmDeleteDialog-D4_Bbpdd.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Ce=t.lazy(()=>L(()=>import("./AddMemberDialog-Bn5DCHVV.js"),__vite__mapDeps([7,1,8,9,4,5,3,10,11,2,6]))),Ue=()=>{var y,C;const r=J()[0].get("group"),a=X(),i=Z(),o=ee(""),n=re({chatId:r,populate:"true"},{skip:!r}),[p,f]=g(ae),[S,_]=g(ne),[A,Ee]=g(ie),{isAddMember:B}=se(s=>s.misc),[N,z]=t.useState([]),[T,u]=t.useState(!1),[b,x]=t.useState("Group Name"),[F,v]=t.useState(!0),[M,D]=t.useState(!1),[I,c]=t.useState(""),R=[{isError:o.isError,error:o.error},{isError:n.isError,error:n.error}];pe(R),t.useEffect(()=>{const s=n.data;s&&(x(s.chat.name),c(s.chat.name),z(s.chat.members))},[n.data]);const H=()=>{v(s=>!s)},V=()=>{v(!1)},P=()=>{a("/")},U=()=>{u(!1),p("Updating Group Name...",{chatId:r,name:I})},O=()=>{D(!0)},k=()=>{D(!1)},$=()=>{i(ce(!0))},K=()=>{A("Deleting Group. ..",r),k(),a("/groups")},Q=s=>{S("Removing Member...",{chatId:r,userId:s})};t.useEffect(()=>(r&&(x(`Group Name ${r}`),c(`Group Name ${r}`)),()=>{x(""),c(""),u(!1)}),[r]);const W=e.jsxs(e.Fragment,{children:[e.jsx(fe,{sx:{display:{xs:"block",sm:"none",position:"fixed",right:"1rem",top:"1rem"}},children:e.jsx(d,{onClick:H,children:e.jsx(be,{})})}),e.jsx(ve,{title:"back",children:e.jsx(d,{sx:{position:"absolute",top:"2rem",left:"2rem",bgcolor:le,color:"white",":hover":{bgcolor:"rgba(0,0,0,0.7)"}},onClick:P,children:e.jsx(ke,{})})})]}),Y=e.jsx(l,{direction:"row",alignItems:"center",justifyContent:"center",spacing:"1rem",padding:"3rem",children:T?e.jsxs(e.Fragment,{children:[e.jsx(Me,{value:I,onChange:s=>c(s.target.value)}),e.jsx(d,{onClick:U,disabled:f,children:e.jsx(De,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"h4",children:b}),e.jsx(d,{disabled:f,onClick:()=>u(!0),children:e.jsx(Ie,{})})]})}),q=e.jsxs(l,{direction:{xs:"column-reverse",sm:"row"},spacing:"1rem",p:{xs:"0",sm:"1rem",md:"1rem 4rem"},children:[e.jsx(E,{size:"large",color:"error",startIcon:e.jsx(xe,{}),onClick:O,children:"Delete Group"}),e.jsx(E,{size:"large",variant:"contained",startIcon:e.jsx(he,{}),onClick:$,children:"Add Member"})]});return o.isLoading?e.jsx(oe,{}):e.jsxs(h,{container:!0,height:"100vh",children:[e.jsx(h,{item:!0,sx:{display:{xs:"none",sm:"block"}},sm:4,children:e.jsx(w,{myGroups:(y=o==null?void 0:o.data)==null?void 0:y.groups,chatId:r})}),e.jsxs(h,{item:!0,xs:12,sm:8,sx:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",padding:"1rem 3rem"},children:[W,b&&e.jsxs(e.Fragment,{children:[Y,e.jsx(m,{margin:"2rem",alignSelf:"flex-start",variant:"body1",children:"Members"}),e.jsx(l,{maxWidth:"45rem",width:"100%",boxSizing:"border-box",padding:{sm:"1rem",xs:"0",md:"1rem 4rem"},spacing:"2rem",height:"50vh",overflow:"auto",children:_?e.jsx(ge,{}):N.map(s=>e.jsx(me,{user:s,isAdded:!0,styling:{boxShadow:"0 0 0.5rem  rgba(0,0,0,0.2)",padding:"1rem 2rem",borderRadius:"1rem"},handler:Q},s._id))}),q]})]}),B&&e.jsx(t.Suspense,{fallback:e.jsx(G,{open:!0}),children:e.jsx(Ce,{chatId:r})}),M&&e.jsx(t.Suspense,{fallback:e.jsx(G,{open:!0}),children:e.jsx(ye,{open:M,handleClose:k,deleteHandler:K})}),e.jsx(je,{sx:{display:{xs:"block",sm:"none"}},open:F,onClose:V,children:e.jsx(w,{w:"50vw",myGroups:(C=o==null?void 0:o.data)==null?void 0:C.groups,chatId:r})})]})},w=({w:r="100%",myGroups:a=[],chatId:i})=>e.jsx(l,{width:r,sx:{backgroundImage:"linear-gradient(to bottom, #2F4F4F, #000000)",height:"100vh",overflow:"auto"},children:a.length>0?a.map(o=>e.jsx(Ge,{group:o,chatId:i},o._id)):e.jsx(m,{textAlign:"center",padding:"1rem",children:"No groups"})}),Ge=t.memo(({group:r,chatId:a})=>{const{name:i,avatar:o,_id:n}=r;return e.jsx(te,{sx:{marginTop:"0.07rem",padding:"0.001rem",width:"100%"},to:`?group=${n}`,onClick:p=>{a===n&&p.preventDefault()},children:e.jsx(ue.div,{initial:{opacity:0,y:"-100%"},whileInView:{opacity:1,y:0},transition:{delay:.1},style:{display:"flex",gap:"1rem",alignItems:"center",hover:"none",position:"relative",padding:"1rem"},children:e.jsxs(l,{direction:"row",spacing:"1rem",alignItems:"center",children:[e.jsx(de,{avatar:o}),e.jsx(m,{sx:{color:"white"},children:i})]})})})});export{Ue as default};
