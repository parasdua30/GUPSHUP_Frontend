import{j as e,R as U,r as C,u as B,S as V,V as q,_ as o,a as S,s as I,b as W}from"./index-Du6Uwkmi.js";import{i as A,u as p,a as D}from"./index-DJ2Ah1Ch.js";import{C as R}from"./Container-CAA9JtHf.js";import{P,I as E}from"./Modal-DdgoaOgr.js";import{c as M,T as i}from"./Typography-D1miUXsC.js";import{T as l}from"./TextField-BYQxlb9E.js";import{B as x}from"./Button-DK210MLF.js";import{A as O}from"./Menu-wUt2zOYa.js";import"./isMuiElement-D1-MrS4c.js";const _=M([e.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),e.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt"),$=v=>{if(!A(v))return{isValid:!1,errorMessage:"Username is Invalid"}};function ee(){const[v,k]=U.useState(!0),[f,g]=C.useState(!1),w=()=>k(c=>!c),[F,L]=C.useState(!1),b=p(""),j=p(""),r=p("",$),n=p(""),d=D(),y=B(),H=async c=>{var h,m;c.preventDefault();const u=o.loading("Logging In...");g(!0);const t={withCredentials:!0,headers:{"Content-Type":"application/json"}};try{const{data:a}=await S.post(`${I}/api/v1/user/login`,{username:r.value,password:n.value},t);y(W(a.user)),o.success(a.message,{id:u}),L(!0),window.location.reload()}catch(a){o.error(((m=(h=a==null?void 0:a.response)==null?void 0:h.data)==null?void 0:m.message)||"Something Went Wrong",{id:u})}finally{g(!1)}},T=async c=>{var m,a;c.preventDefault();const u=o.loading("Signing Up...");g(!0);const t=new FormData;t.append("avatar",d.file),t.append("name",b.value),t.append("bio",j.value),t.append("username",r.value),t.append("password",n.value);const h={withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}};try{const{data:s}=await S.post(`${I}/api/v1/user/new`,t,h);y(W(s.user)),o.success(s.message,{id:u}),window.location.reload()}catch(s){o.error(((a=(m=s==null?void 0:s.response)==null?void 0:m.data)==null?void 0:a.message)||"Something Went Wrong",{id:u})}finally{g(!1)}};return e.jsx("div",{style:{backgroundImage:"linear-gradient(black, #2F4F4F)"},children:F?e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"white"}}):e.jsx(R,{component:"main",maxWidth:"xs",sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(P,{style:{background:"rgba(255, 255, 255, 0.80)",boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.37)",backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)",borderRadius:"10px",border:"1px solid rgba(255, 255, 255, 0.18)"},elevation:3,sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center"},children:v?e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"h5",children:"Login"}),e.jsxs("form",{style:{width:"100%",marginTop:"1rem"},onSubmit:H,children:[e.jsx(l,{required:!0,fullWidth:!0,label:"Username",margin:"normal",variant:"outlined",value:r.value,onChange:r.changeHandler}),e.jsx(l,{required:!0,fullWidth:!0,label:"Password",type:"password",margin:"normal",variant:"outlined",value:n.value,onChange:n.changeHandler}),e.jsx(x,{sx:{marginTop:"1rem"},variant:"contained",color:"primary",type:"submit",fullWidth:!0,disabled:f,children:"Login"}),e.jsx(i,{textAlign:"center",m:"1rem",children:"OR"}),e.jsx(x,{disabled:f,fullWidth:!0,variant:"text",onClick:w,children:"Sign Up Instead"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{variant:"h5",children:"Sign Up"}),e.jsxs("form",{style:{width:"100%",marginTop:"1rem"},onSubmit:T,children:[e.jsxs(V,{position:"relative",width:"10rem",margin:"auto",children:[e.jsx(O,{sx:{width:"10rem",height:"10rem",objectFit:"contain"},src:d.preview}),e.jsx(E,{sx:{position:"absolute",bottom:"0",right:"0",color:"white",bgcolor:"rgba(0,0,0,0.5)",":hover":{bgcolor:"rgba(0,0,0,0.7)"}},component:"label",children:e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx(q,{type:"file",onChange:d.changeHandler})]})})]}),d.error&&e.jsx(i,{m:"1rem auto",width:"fit-content",display:"block",color:"error",variant:"caption",children:d.error}),e.jsx(l,{required:!0,fullWidth:!0,label:"Name",margin:"normal",variant:"outlined",value:b.value,onChange:b.changeHandler}),e.jsx(l,{required:!0,fullWidth:!0,label:"Bio",margin:"normal",variant:"outlined",value:j.value,onChange:j.changeHandler}),e.jsx(l,{required:!0,fullWidth:!0,label:"Username",margin:"normal",variant:"outlined",value:r.value,onChange:r.changeHandler}),r.error&&e.jsx(i,{variant:"caption",color:"error",children:r.error}),e.jsx(l,{required:!0,fullWidth:!0,label:"Password",type:"password",margin:"normal",variant:"outlined",value:n.value,onChange:n.changeHandler}),n.error&&e.jsx(i,{variant:"caption",color:"error",children:n.error}),e.jsx(x,{sx:{marginTop:"1rem"},variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Sign Up"}),e.jsx(i,{textAlign:"center",m:"1rem",children:"OR"}),e.jsx(x,{disabled:f,fullWidth:!0,variant:"text",onClick:w,children:"Login Instead"})]})]})})})})}export{ee as default};
