const __vite__fileDeps=["assets/Search-DRVSwrzv.js","assets/index-Du6Uwkmi.js","assets/index-DJ2Ah1Ch.js","assets/UserItem-BKAyl7NY.js","assets/ListItem-2FVKjEUW.js","assets/Menu-wUt2zOYa.js","assets/Typography-D1miUXsC.js","assets/Modal-DdgoaOgr.js","assets/isMuiElement-D1-MrS4c.js","assets/Hook-v4cjVH3m.js","assets/DialogTitle-Ds0-Ex3u.js","assets/TextField-BYQxlb9E.js","assets/InputAdornment-1L-Srb_k.js","assets/Menu-D39zixRf.js","assets/Toolbar-GU60VVgH.js","assets/Notifications-DkBQbnSo.js","assets/Tooltip-Cct72D16.js","assets/AvatarCard-DzGKErVP.js","assets/ExitToApp-DHmyjwa3.js","assets/Notifications-CszZypyr.js","assets/Button-DK210MLF.js","assets/NewGroup-sNOx2Hn-.js","assets/sampleData-Lm4jJ_UH.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{y as Z,z as oo,B as to,D as E,E as C,r as i,F as so,G as eo,j as o,H as ao,J as ro,K as no,L as N,u as w,k as G,c as k,M as io,O as P,P as co,Q as lo,U as po,W as ho,a as uo,s as xo,X as go,_ as z,Y as mo,Z as jo,v as vo,S as b,$ as fo,h as Co,a0 as ko,a1 as bo,a2 as U,a3 as Io,m as yo,a4 as Ao,a5 as Bo,a6 as Mo,a7 as Do,t as H,a8 as B,a9 as Eo,aa as O,ab as _o,ac as No,ad as Go,ae as Lo}from"./index-Du6Uwkmi.js";import{B as y,M as To,D as zo}from"./Menu-D39zixRf.js";import{P as Ho,I as V,B as _}from"./Modal-DdgoaOgr.js";import{T as Oo,B as Ro}from"./Toolbar-GU60VVgH.js";import{c as A,T as f}from"./Typography-D1miUXsC.js";import{A as So,m as wo,b as R,D as Po,a as Uo,u as Vo}from"./Hook-v4cjVH3m.js";import{G as $o,N as Fo}from"./Notifications-DkBQbnSo.js";import{T as Wo}from"./Tooltip-Cct72D16.js";import{A as Qo}from"./AvatarCard-DzGKErVP.js";import{A as qo,M as Jo}from"./Menu-wUt2zOYa.js";import{E as Yo}from"./ExitToApp-DHmyjwa3.js";function Ko(t){return Z("MuiAppBar",t)}oo("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Xo=["className","color","enableColorOnDark","position"],Zo=t=>{const{color:s,position:e,classes:r}=t,a={root:["root",`color${E(s)}`,`position${E(e)}`]};return ro(a,Ko,r)},M=(t,s)=>t?`${t==null?void 0:t.replace(")","")}, ${s})`:s,ot=to(Ho,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:e}=t;return[s.root,s[`position${E(e.position)}`],s[`color${E(e.color)}`]]}})(({theme:t,ownerState:s})=>{const e=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return C({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},s.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},s.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},s.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},s.position==="static"&&{position:"static"},s.position==="relative"&&{position:"relative"},!t.vars&&C({},s.color==="default"&&{backgroundColor:e,color:t.palette.getContrastText(e)},s.color&&s.color!=="default"&&s.color!=="inherit"&&s.color!=="transparent"&&{backgroundColor:t.palette[s.color].main,color:t.palette[s.color].contrastText},s.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!s.enableColorOnDark&&{backgroundColor:null,color:null},s.color==="transparent"&&C({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&C({},s.color==="default"&&{"--AppBar-background":s.enableColorOnDark?t.vars.palette.AppBar.defaultBg:M(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":s.enableColorOnDark?t.vars.palette.text.primary:M(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},s.color&&!s.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":s.enableColorOnDark?t.vars.palette[s.color].main:M(t.vars.palette.AppBar.darkBg,t.vars.palette[s.color].main),"--AppBar-color":s.enableColorOnDark?t.vars.palette[s.color].contrastText:M(t.vars.palette.AppBar.darkColor,t.vars.palette[s.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:s.color==="inherit"?"inherit":"var(--AppBar-color)"},s.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),tt=i.forwardRef(function(s,e){const r=so({props:s,name:"MuiAppBar"}),{className:a,color:u="primary",enableColorOnDark:g=!1,position:n="fixed"}=r,m=eo(r,Xo),c=C({},r,{color:u,position:n,enableColorOnDark:g}),p=Zo(c);return o.jsx(ot,C({square:!0,component:"header",ownerState:c,elevation:4,className:ao(p.root,a,n==="fixed"&&"mui-fixed"),ref:e},m))});function st({title:t="GupShup",description:s="GupShup is a chat app that allows you to communicate with your friends and family."}){return o.jsx("div",{children:o.jsxs(no,{children:[o.jsx("title",{children:t}),o.jsx("meta",{name:"description",content:s})]})})}const et=A(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10h5v-2h-5c-4.34 0-8-3.66-8-8s3.66-8 8-8 8 3.66 8 8v1.43c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57V12c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5c1.38 0 2.64-.56 3.54-1.47.65.89 1.77 1.47 2.96 1.47 1.97 0 3.5-1.6 3.5-3.57V12c0-5.52-4.48-10-10-10m0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3"}),"AlternateEmail"),at=A(o.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth"),rt=A(o.jsx("path",{d:"M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25m6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8"}),"Face"),nt=A(o.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),it=A(o.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),ct=i.lazy(()=>N(()=>import("./Search-DRVSwrzv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),lt=i.lazy(()=>N(()=>import("./Notifications-CszZypyr.js"),__vite__mapDeps([19,1,9,6,10,7,5,4,8,20]))),pt=i.lazy(()=>N(()=>import("./NewGroup-sNOx2Hn-.js"),__vite__mapDeps([21,1,2,22,3,4,5,6,7,8,9,10,11,20])));function dt(){const t=w(),s=G(),{isSearch:e,isNotification:r,isNewGroup:a}=k(d=>d.misc),{notificationCount:u}=k(d=>d.chat),g=()=>t(P(!0)),n=()=>t(co(!0)),m=()=>{t(lo(!0))},c=()=>{t(po(!0)),t(ho())},p=()=>s("/"),v=()=>s("/groups"),j=async()=>{var d,l;try{const{data:h}=await uo.get(`${xo}/api/v1/user/logout`,{withCredentials:!0});t(go()),z.success(h.message)}catch(h){z.error(((l=(d=h==null?void 0:h.response)==null?void 0:d.data)==null?void 0:l.message)||"Something Went Wrong",{})}};return o.jsxs(o.Fragment,{children:[o.jsx(y,{sx:{flexGrow:1},height:"4rem",children:o.jsx(tt,{position:"static",sx:{backgroundImage:io},children:o.jsxs(Oo,{children:[o.jsx(f,{variant:"h6",sx:{display:{xs:"none",sm:"block"}},onClick:p,children:"GupShup"}),o.jsx(y,{sx:{display:{xs:"block",sm:"none"}},children:o.jsx(V,{color:"inherit",onClick:g,children:o.jsx(To,{})})}),o.jsx(y,{sx:{flexGrow:1}}),o.jsxs(y,{children:[o.jsx(I,{title:"Search",icon:o.jsx(it,{}),onClick:n}),o.jsx(I,{title:"New Group",icon:o.jsx(So,{}),onClick:m}),o.jsx(I,{title:"Manage Groups",icon:o.jsx($o,{}),onClick:v}),o.jsx(I,{title:"Notifications",icon:o.jsx(Fo,{}),onClick:c,value:u}),o.jsx(I,{title:"Logout",icon:o.jsx(nt,{}),onClick:j})]})]})})}),e&&o.jsx(i.Suspense,{fallback:o.jsx(_,{open:!0}),children:o.jsx(ct,{})}),r&&o.jsx(i.Suspense,{fallback:o.jsx(_,{open:!0}),children:o.jsx(lt,{})}),a&&o.jsx(i.Suspense,{fallback:o.jsx(_,{open:!0}),children:o.jsx(pt,{})})]})}const I=({title:t,icon:s,onClick:e,value:r})=>o.jsx(Wo,{title:t,children:o.jsx(V,{color:"inherit",size:"large",onClick:e,children:r?o.jsx(Ro,{badgeContent:r,color:"error",children:s}):s})}),ht=({avatar:t=[],name:s,_id:e,groupChat:r=!1,sameSender:a,isOnline:u,newMessageAlert:g,index:n=0,handleDeleteChat:m})=>o.jsx(mo,{sx:{marginTop:"0.07rem",padding:"0.001rem",width:"100%"},to:`/chat/${e}`,onContextMenu:c=>m(c,e,r),children:o.jsxs(wo.div,{initial:{opacity:0,y:"-100%"},whileInView:{opacity:1,y:0},transition:{delay:.05},style:{display:"flex",gap:"1rem",alignItems:"center",hover:"none",backgroundColor:a?jo:vo,color:a?"white":"aliceblue",position:"relative",padding:"1rem"},children:[o.jsx(Qo,{avatar:t}),o.jsxs(b,{children:[o.jsx(f,{children:s}),g&&o.jsxs(f,{children:[g.count," New Message"," "]})]}),u&&o.jsx(y,{sx:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"lightgreen",position:"absolute",top:"50%",right:"1rem",transform:"translateY(-50%)"}})]})}),ut=i.memo(ht),S=({w:t="100%",chats:s=[],chatId:e,onlineUsers:r=[],newMessagesAlert:a=[{chatId:"",count:0}],handleDeleteChat:u})=>o.jsx(b,{width:t,direction:"column",overflow:"auto",height:"100%",children:s==null?void 0:s.map((g,n)=>{const{avatar:m,_id:c,name:p,groupChat:v,members:j}=g,d=a.find(({chatId:h})=>h===c),l=j==null?void 0:j.some(h=>r.includes(h));return o.jsx(ut,{index:n,newMessageAlert:d,isOnline:l,avatar:m,name:p,_id:c,groupChat:v,sameSender:e===c,handleDeleteChat:u},c)})}),xt=({user:t})=>{var s;return o.jsxs(b,{spacing:"2rem",direction:"column",alignItems:"center",children:[o.jsx(qo,{src:fo(t!=null&&t.avatar?(s=t==null?void 0:t.avatar)==null?void 0:s.url:"https://www.w3schools.com/howto/img_avatar.png"),sx:{width:200,height:200,objectFit:"contain",marginBottom:"1rem",border:"5px solid white"}}),o.jsx(D,{heading:"Bio",text:t==null?void 0:t.bio}),o.jsx(D,{heading:"Username",text:t==null?void 0:t.username,Icon:o.jsx(et,{})}),o.jsx(D,{heading:"Name",text:t==null?void 0:t.name,Icon:o.jsx(rt,{})}),o.jsx(D,{heading:"Joined",text:Co(t==null?void 0:t.createdAt).fromNow(),Icon:o.jsx(at,{})})]})},D=({text:t,Icon:s,heading:e})=>o.jsxs(b,{direction:"row",alignItems:"center",spacing:"1rem",color:"white",textAlign:"center",children:[s&&s,o.jsxs(b,{children:[o.jsx(f,{variant:"body1",children:t}),o.jsx(f,{color:"lightgrey",variant:"caption",children:e})]})]}),gt=({dispatch:t,deleteMenuAnchor:s})=>{const e=G(),{isDeleteMenu:r,selectedDeleteChat:a}=k(h=>h.misc),[u,g,n]=R(ko),[m,c,p]=R(bo),v=a.groupChat,j=()=>{t(U(!1)),s.current=null},d=()=>{j(),m("Leaving Group...",a.chatId)},l=()=>{j(),u("Deleting Chat...",a.chatId)};return i.useEffect(()=>{(n||p)&&e("/")},[n,p]),o.jsx(Jo,{open:r,onClose:j,anchorEl:s.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"center"},children:o.jsx(b,{sx:{width:"10rem",padding:"0.5rem",cursor:"pointer"},direction:"row",alignItems:"center",spacing:"0.5rem",onClick:v?d:l,children:v?o.jsxs(o.Fragment,{children:[o.jsx(Yo,{}),o.jsx(f,{children:"Leave Group"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Po,{}),o.jsx(f,{children:"Delete Chat"})]})})})},mt=()=>t=>s=>{const e=Io(),r=G(),a=w(),u=i.useRef(null),g=yo(),n=e.chatId,{isMobile:m}=k(x=>x.misc),{user:c}=k(x=>x.auth),{newMessagesAlert:p}=k(x=>x.chat),[v,j]=i.useState([]),{isLoading:d,data:l,isError:h,error:$,refetch:L}=Ao("");Uo([{isError:h,error:$}]),i.useEffect(()=>{Bo({key:O,value:p})},[p]);const T=(x,K,X)=>{a(U(!0)),a(_o({chatId:K,groupChat:X})),u.current=x.currentTarget},F=()=>{a(P(!1))},W=i.useCallback(x=>{x.chatId!==n&&a(Mo(x))},[n]),Q=i.useCallback(()=>{a(Do())},[a]),q=i.useCallback(()=>{L(),r("/")},[L,r]),J=i.useCallback(x=>{j(x)},[l]),Y={[O]:W,[No]:Q,[Go]:q,[Lo]:J};return Vo(g,Y),o.jsxs(o.Fragment,{children:[o.jsx(st,{}),o.jsx(dt,{}),o.jsx(gt,{dispatch:a,deleteMenuAnchor:u}),d?o.jsx(H,{}):o.jsx(zo,{open:m,onClose:F,children:o.jsx(S,{w:"70vw",chats:l==null?void 0:l.chats,chatId:n,handleDeleteChat:T,newMessagesAlert:p,onlineUsers:v})}),o.jsxs(B,{container:!0,height:"calc(100vh - 4rem)",children:[o.jsx(B,{item:!0,sm:4,md:3,sx:{display:{xs:"none",sm:"block"}},height:"100%",children:d?o.jsx(H,{}):o.jsx(S,{chats:l==null?void 0:l.chats,chatId:n,handleDeleteChat:T,newMessagesAlert:p,onlineUsers:v})}),o.jsx(B,{item:!0,xs:12,sm:8,md:5,lg:6,height:"100%",children:o.jsx(t,{...s,chatId:n,user:c})}),o.jsx(B,{item:!0,md:4,lg:3,height:"100%",sx:{display:{xs:"none",md:"block"},padding:"2rem",backgroundImage:Eo},children:o.jsx(xt,{user:c})})]})]})},Dt=mt;export{Dt as A,it as S};
